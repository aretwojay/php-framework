<div class="container">
  <div class="d-flex justify-content-between align-items-center mb--4">
    <h1 class="h2 m--0">Mes articles</h1>
    <a href="/posts/create" class="button">Créer un article</a>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Titre</th>
        <th>Image</th>
        <th>Publication</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <?php foreach ($posts as $post): ?>
      <tr>
        <td><?= $post->getId() ?></td>
        <td><?= htmlspecialchars($post->getTitle()) ?></td>
        <td>
          <?php if ($post->getImage()): ?>
          <img
            src="<?= htmlspecialchars($post->getImage()) ?>"
            alt="Image"
            class="table__img"
          />
          <?php else: ?>
          <span style="color: var(--grey)">Aucune</span>
          <?php endif; ?>
        </td>
        <td>
          <span
            class="badge <?= $post->isPublished() ? 'badge--success' : 'badge--warning' ?>"
          >
            <?= $post->isPublished() ? 'Publié' : 'Brouillon' ?>
          </span>
        </td>
        <td><?= date('d/m/Y', strtotime($post->getCreatedAt())) ?></td>
        <td>
          <div class="d-flex gap--2">
            <a
              href="/posts/<?= $post->getId() ?>/edit"
              class="button button--small"
              >Modifier</a
            >
            <form
              action="/posts/<?= $post->getId() ?>/delete"
              method="POST"
              onsubmit="return confirm('Êtes-vous sûr ?');"
              style="display: inline"
            >
              <input
                type="hidden"
                name="csrf_token"
                value="<?= $csrfToken ?? '' ?>"
              />
              <button type="submit" class="button button--small button--danger">
                Supprimer
              </button>
            </form>
          </div>
        </td>
      </tr>
      <?php endforeach; ?>
    </tbody>
  </table>
</div>
